# Facebook API and related logic

$(document).on 'turbolinks:load', ->
  if $("#body_sessions_new").length

    $('#facebook_login_btn').unbind().bind 'click', ->
      FB.login (response) ->
        FB.getLoginStatus (response) ->
          sendFacebookAuthRequest(response)

    sendFacebookAuthRequest = (response) ->
      console.log response
      console.log 'connected' if response.status == 'connected'

    window.fbAsyncInit = ->
      FB.init
        appId: <%= ENV['FACEBOOK_APP_ID'] %>
        cookie: true
        xfbml: true
        version: 'v2.8'
