<%= content_for :head do %>
  <meta id="course_theme_color" content="<%= @course.theme %>">
<% end %>


<div class="container" style="margin-top: 15px">
  <div class="row">
    <% if !@course.public %>

      <div class="col-md-9">
        <%= render partial: 'course_body' %>

        <h2 style="text-align: center; margin: 15px">Related lessons</h2>

        <div class="box-shadow-block" style="margin-top: 15px;">
          <%= render partial: 'lesson', collection: @course.lessons, cached: true %>
        </div>

        <% if it_is_current_user(@course.author) %>
          <div class="box-shadow-block">
            <h2 style="text-align: center; padding: 10px">
              <%= link_to 'Create a new lesson', new_course_lesson_path(@course), class: 'text_coloured_element' %>
            </h2>
          </div>
        <% end %>
      </div>
      <div class="col-md-3">
        <div class="list-group">
          <%= react_component('CourseSubscribers', {
              current_user: current_user.id, course: @course.id, author: @course.author_id
          }) %>

          <% if it_is_current_user(@course.author) %>
            <div class="list-group" style="margin-top: 15px">
              <h3>Actions</h3>
              <%= link_to edit_course_path(@course), class: 'list-group-item list-group-item-action' do %>
                <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit course
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    <% else %>

      <div class="col-md-12">
        <%= render partial: 'course_body' %>

        <h2 style="text-align: center; margin: 15px">Related lessons</h2>

        <div class="box-shadow-block" style="margin-top: 15px;">
          <%= render partial: 'lesson', collection: @course.lessons, cached: true %>
        </div>

        <% if it_is_current_user(@course.author) %>
          <div class="box-shadow-block">
            <h2 style="text-align: center; padding: 10px">
              <%= link_to 'Create a new lesson', new_course_lesson_path(@course), class: 'text_coloured_element' %>
            </h2>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

